<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Top Things to Do After Installing Ubuntu. the Script &#8211; Quantum Leap</title>
<meta name="description" content="One script to rule them all">
<meta name="keywords" content="scripting, ubuntu">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Top Things to Do After Installing Ubuntu. the Script">
<meta name="twitter:description" content="One script to rule them all">
<meta name="twitter:site" content="@carlolobrano">
<meta name="twitter:creator" content="@carlolobrano">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Top Things to Do After Installing Ubuntu. the Script">
<meta property="og:description" content="One script to rule them all">
<meta property="og:url" content="http://localhost:4000/articles/top-things-to-do-after-installing-ubuntu-the-script/">
<meta property="og:site_name" content="Quantum Leap">





<link rel="canonical" href="http://localhost:4000/articles/top-things-to-do-after-installing-ubuntu-the-script/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Quantum Leap Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="http://localhost:4000/about/" >About</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/blog/" >Blog</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/tags/" >Tags</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://localhost:4000/" class="site-logo" rel="home" title="Quantum Leap"><img src="http://localhost:4000/images/site-logo.png" width="200" height="200" alt="Quantum Leap logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">Quantum Leap</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Development, Smart Tools and Automation</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#scripting" title="Pages tagged scripting">scripting</a>&nbsp;&bull;&nbsp;<a href="http://localhost:4000/tags/#ubuntu" title="Pages tagged ubuntu">ubuntu</a></span>
        
          <h1 class="entry-title">Top Things to Do After Installing Ubuntu. the Script</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        
          <img src="http://localhost:4000/images/bio-photo.jpg" class="bio-photo" alt="Carlo Lobrano bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Carlo Lobrano</span></span>
        <span class="entry-date date published"><time datetime="2013-11-24T00:00:00+01:00"><i class="fa fa-calendar-o"></i> November 24, 2013</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p>At each Ubuntu release lot of articles appear on the Web about <strong>what to do after installing Ubuntu</strong>. This actually happens for almost all the major Linux distributions, since some tools, libraries or codecs have legal constraints in some countries so their are not shipped with the default GNU Linux distribution.</p>

<p>Said that most of the <strong>best things to do after installing name-of-your-distribution</strong> are usually the same all the time, here the engineer’s mind comes to make a <strong>script that sets everything up everytime</strong> for Ubuntu and derivates<a rel="nofollow" href="#footnote1" id="ref_footnote1"><sup>1</sup></a>.</p>

<p>Here is the link to the <a href="https://gist.github.com/clobrano/7437551">GitHub Gist</a> of the complete script, feel free to leave a comment there.</p>

<p>The easiest way to make this script was the following</p>

<pre><code>sudo apt-get update &amp;&amp; apt-get upgrade
sudo apt-get install &lt;whatever you want&gt;
...
</code></pre>

<p>but:</p>

<ol>
  <li>It is not even close to a bash scripting exercize (see previous note 1)</li>
  <li>What if I don’t want to install a tool, or what if I change from Ubuntu to Kubuntu, from a i386 system to an X86_64…?</li>
</ol>

<p>What I want is <strong>configurability</strong> and <strong>control</strong>.</p>

<h2 id="configurability">Configurability</h2>
<p>I used a simply <em>select-case</em> structure to let the user choose whether execute an <code>input function</code> or not</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function</span> prompt
<span class="o">{</span>
    <span class="nv">FUNC</span><span class="o">=</span><span class="nv">$1</span>
    <span class="k">select</span> choice in <span class="s2">&quot;yes&quot;</span> <span class="s2">&quot;no&quot;</span> <span class="s2">&quot;exit&quot;</span><span class="p">;</span> <span class="k">do</span>
        <span class="k">case</span> <span class="nv">$choice</span> in
            <span class="s2">&quot;yes&quot;</span><span class="o">)</span>
                <span class="nv">$FUNC</span> <span class="nv">$choice</span>
                <span class="nb">break</span>
                <span class="p">;;</span>
            <span class="s2">&quot;no&quot;</span><span class="o">)</span>
                <span class="nv">$FUNC</span> <span class="nv">$choice</span>
                <span class="nb">break</span>
                <span class="p">;;</span>
            <span class="s2">&quot;exit&quot;</span><span class="o">)</span>
                <span class="nb">exit</span>
                <span class="p">;;</span>
            *<span class="o">)</span>
                log <span class="s2">&quot;Bad reply. Please answer yes/no&quot;</span>
                <span class="p">;;</span>
        <span class="k">esac</span>
    <span class="k">done</span>
<span class="o">}</span></code></pre></div>

<p>Ok, the action for the choice “yes” and “no” is the same (just passing the choice to the input function), but that was necessary in order to <em>validate</em> the user reply: if the user replies with “abracadabra” an error message will appear.</p>

<h2 id="control">Control</h2>

<p>The function passed to the previous function stores the user choice and executes the command to install the tool/program/library.</p>

<p>For example:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function</span> systemUpdate
<span class="o">{</span>
    log <span class="s2">&quot;Update system&quot;</span>
    <span class="nv">SYS_UPDATE</span><span class="o">=</span><span class="k">${</span><span class="nv">SYS_UPDATE</span><span class="p">:=</span><span class="nv">$1</span><span class="k">}</span>

    <span class="k">case</span> <span class="nv">$SYS_UPDATE</span> in
        <span class="s2">&quot;to-do&quot;</span><span class="o">)</span>
            log <span class="s2">&quot;Updating System&quot;</span>
            execute apt-get update <span class="o">&amp;&amp;</span> apt-get upgrade
            <span class="nv">SYS_UPDATE</span><span class="o">=</span><span class="s2">&quot;done&quot;</span>
            <span class="p">;;</span>
        <span class="s2">&quot;yes&quot;</span><span class="o">)</span>
            <span class="nv">SYS_UPDATE</span><span class="o">=</span><span class="s2">&quot;to-do&quot;</span>
            <span class="p">;;</span>
        <span class="s2">&quot;no&quot;</span><span class="o">)</span>
            log <span class="s2">&quot;System won&#39;t be updated&quot;</span>
            <span class="nv">SYS_UPDATE</span><span class="o">=</span><span class="s2">&quot;not-to-do&quot;</span>
            <span class="p">;;</span>
        <span class="s2">&quot;not-to-do&quot;</span><span class="o">)</span>
            log Nothing to <span class="k">do</span>
    <span class="k">esac</span>
<span class="o">}</span></code></pre></div>

<p>the <code>systemUpdate</code> function stores the user choice in <code>SYS_UPDATE</code> variable. At the first call <code>SYS_UPDATE</code> is set with the input argument</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">SYS_UPDATE</span><span class="o">=</span><span class="k">${</span><span class="nv">SYS_UPDATE</span><span class="p">:=</span><span class="nv">$1</span><span class="k">}</span></code></pre></div>

<p>while at all the others calls, the input argument won’t change the <code>SYS_UPDATE</code> value, that is the function executes what has been chosen the first time.</p>

<p>In this way the flow of execution is:</p>

<ol>
  <li>Choose what to do = set function’s variable (<strong>configurability</strong>)</li>
  <li>Recap what you choose = print out the function’s variable (<strong>control</strong>)</li>
  <li>Ask whether continue with this choises or not</li>
  <li>Execute or exiting according to point 3</li>
</ol>

<p>For the example above, the <code>Main</code> program will be</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s2">&quot;Update the system?&quot;</span>
prompt systemUpdate                <span class="c"># this will prompt the list &quot;yes, no, exit&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;System update: $SYS_UPDATE&quot;</span>  <span class="c"># This will prompt something like &quot;System Update: to-do&quot;. Here you can interrupt the script</span>
systemUpdate                       <span class="c"># This will actually execute the update</span></code></pre></div>

<p>In the bash script there are some other auto-explicative utilities for logging and to determine which is the running system that can be useful to install specific tools (like gnome-tweak-tools or something KDE related)</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function</span> isSystem64
<span class="o">{</span>
    <span class="k">case</span> <span class="sb">`</span>uname -m<span class="sb">`</span> in
        <span class="s2">&quot;x86_64&quot;</span><span class="o">)</span>
            <span class="nv">SYSTEM64</span><span class="o">=</span>1
            <span class="p">;;</span>
        *<span class="o">)</span>
            <span class="nv">SYSTEM64</span><span class="o">=</span>0
            <span class="p">;;</span>
    <span class="k">esac</span>
<span class="o">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function</span> detectDE
<span class="o">{</span>
    <span class="k">if</span> <span class="o">[</span> x<span class="s2">&quot;$KDE_FULL_SESSION&quot;</span> <span class="o">=</span> x<span class="s2">&quot;true&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">DE</span><span class="o">=</span>kde<span class="p">;</span>
    <span class="k">elif</span> <span class="o">[</span> x<span class="s2">&quot;$GNOME_DESKTOP_SESSION_ID&quot;</span> !<span class="o">=</span> x<span class="s2">&quot;&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">DE</span><span class="o">=</span>gnome<span class="p">;</span>
    <span class="k">else</span> <span class="nv">DE</span><span class="o">=</span>unknown
    <span class="k">fi</span>
<span class="o">}</span></code></pre></div>

<p>And that’s it, so far.</p>

<h4 id="footnotes">Footnotes</h4>
<ol>
  <li>by the way this was also an exercise of <em>Bash scripting</em> and the best way for me to take a note of what I need to install and how<a rel="nofollow" href="#ref_footnote1" id="footnote1">[↩]</a>.</li>
</ol>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/blog/what-goes-around-comes-around/" class="btn" title="What Goes Around, Comes Around">Previous</a>
      
      
        <a href="http://localhost:4000/articles/switch-to-application-shortcut-on-linux/" class="btn" title="Switch-to-application Shortcut on Linux">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2015 Carlo Lobrano. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/carlolobrano" title="Carlo Lobrano on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="https://linkedin.com/in/carlolobrano" title="Carlo Lobrano on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="http://stackoverflow.com/users/1197008/carlo" title="Carlo Lobrano on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	<a href="https://instagram.com/carlo.lobrano" title="Carlo Lobrano on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	
	<a href="https://github.com/clobrano" title="Carlo Lobrano on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>




</body>
</html>
