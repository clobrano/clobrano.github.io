<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>What Goes Around, Comes Around • Quantum Leap</title>
    <meta name="description" content="Few weeks ago I begun the Udacity&#8217;s course Software Testing. The course covers the basics of software testing (you don&#8217;t say? :D) and it is pretty good since there are video lessons and exercises, quizes to put yourself to the test.

">
    <meta name="keywords" content="python">
    
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="What Goes Around, Comes Around">
	<meta name="twitter:description" content="Few weeks ago I begun the Udacity&#8217;s course Software Testing. The course covers the basics of software testing (you don&#8217;t say? :D) and it is pretty good since there are video lessons and exercises, quizes to put yourself to the test.

">
	<meta name="twitter:site" content="@https://twitter.com/carlolobrano">
	<meta name="twitter:creator" content="@https://twitter.com/carlolobrano">
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="/images/blog.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="">
	<meta property="og:type" content="article">
	<meta property="og:title" content="What Goes Around, Comes Around">
	<meta property="og:description" content="Few weeks ago I begun the Udacity&#8217;s course Software Testing. The course covers the basics of software testing (you don&#8217;t say? :D) and it is pretty good since there are video lessons and exercises, quizes to put yourself to the test.

">
	<meta property="og:url" content="/what-goes-around-comes-around/">
	<meta property="og:site_name" content="Quantum Leap">

    <link rel="canonical" href="/what-goes-around-comes-around/">

    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Quantum Leap Atom Feed">
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="/js/vendor/html5shiv.min.js"></script>
      <script src="/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="/" class="site-title">Quantum Leap</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">Quantum Leap</a></li>
	
    
        
    
    <li><a href="/about/" >About</a></li>
  
    
        
    
    <li><a href="/archive/" >Archive</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>Quantum Leap <span>Table of Contents</span></h5>
  <ul class="menu-item">
    <li>
      <a href="/about/">
        
        <div class="title">About</div>
        <p class="excerpt">About me</p>
      </a>
    </li><li>
      <a href="/archive/">
        
        <div class="title">Archive</div>
        <p class="excerpt">List of articles</p>
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
		<div class="page-title">
			<h1>What Goes Around, Comes Around</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<p>Few weeks ago I begun the <a href="https://www.udacity.com/">Udacity</a>’s course <strong>Software Testing</strong>. The course covers the basics of software testing (you don’t say? :D) and it is pretty good since there are video lessons and exercises, quizes to put yourself to the test.</p>

<p>In one of the quizes, as part of a bigger problem (implement the <a href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn Checksum</a><a rel="nofollow" href="#footnote1" id="ref_footnote1"><sup>1</sup></a> algorithm), I needed to convert an integer number into a list, that is not a big problem actually, but the implementation gave me a little surprise.</p>

<p>The idea is</p>

<ul>
  <li>divide the number by 10</li>
  <li>push the decimal part into the list</li>
  <li>take the integer part</li>
  <li>repeat all until the integer part is over</li>
</ul>

<p>The following is the code</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">num2list</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10.0</span>
        <span class="c"># This extracts only the decimal part (e.g. 123.4 - 123 == 0.4)</span>
        <span class="n">dec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">n</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">*</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lst</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">num2list</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span></code></pre></div>

<p>surprisingly the result of the test was ‘[1,1,3,4]’. What happened to the number ‘2’?</p>

<p>To better understand the behavior of the code, I added just one print</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">num2list</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10.0</span>
        <span class="n">dec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">n</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">*</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;n=</span><span class="si">%1.1f</span><span class="s">, round(n)=</span><span class="si">%1.1f</span><span class="s">, [(n-round(n)) x 10]=</span><span class="si">%1.1f</span><span class="s">, dec=</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span>
               <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dec</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">lst</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c"># This is for reverse the list</span></code></pre></div>

<p>the following is the new output</p>

<pre><code>n=123.4, round(n)=123.0, [(n-round(n)) x 10]=4.0, dec=4
n=12.3, round(n)=12.0, [(n-round(n)) x 10]=3.0, dec=3
n=1.2, round(n)=1.0, [(n-round(n)) x 10]=2.0, dec=1
n=0.1, round(n)=0.0, [(n-round(n)) x 10]=1.0, dec=1
[1, 1, 3, 4]
</code></pre>

<p>Ok I know, the output is not very clear, however we can see that the implementation worked well for each iteration except for the third, when the number ‘2’ was expected to be extracted, and not the number ‘1’. In fact at the third step, when n=1.20, the value of the following expression</p>

<pre><code>[(n-round(n)) x 10] =
= [(1.2 - 1.0) * 10.0]
</code></pre>

<p>is equal to ‘2.0’ as expected, but the value of the variable ‘dec’ (just the integer part of the previous result) became ‘1’ out of the blue (or so it seemed)!
It took me a little time to figure out the problem (basically to be sure that the fault was not in the code), but then I got it: the approximation!
Actually the debug message prints ‘2.0’ approximating to <strong>the closer value</strong>, while the actual value is something like 1.9999999999…, so taking only the integer part result in having just ‘1’.
The fix is to apply the operator ‘int’ to the ‘round’ approximation of ‘[(n-round(n)) x 10], that by definition (see <a href="http://docs.python.org/2/library/functions.html#round">here</a>).</p>

<blockquote>
  <p>Values are rounded to the closest multiple of 10</p>
</blockquote>

<p>so this is the final function</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">num2list</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">n</span>
    <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10.0</span>
        <span class="n">dec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">n</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">*</span> <span class="mf">10.0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">dec</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dec</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
        <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lst</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></code></pre></div>

<p>When a non negative check of ‘dec’ has been added to cope with the numbers &gt; 5</p>

<pre><code>Without the check if n = 1.6
round(n) = 2.0 (instead of 1.0)
n - round(n) = -0.4 (instead of 0.6) and dec == 4

With the check since dec is negative (-4)
dec = 10 - 4 = 6 OK!
</code></pre>

<p>an alternative would be</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
    <span class="n">dec</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">dec</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">...</span></code></pre></div>

<h4 id="footnotes">Footnotes</h4>
<ol>
  <li>The test warned to avoid checking Wikipedia about the Luhn algorithm because in the same page there is a (really better than mine :D) python example <a rel="nofollow" href="#ref_footnote1" id="footnote1">[↩]</a>.</li>
</ol>


				<hr />
				<footer class="page-footer">
					


<div class="author-image">
	<img src="/images/bio-photo.jpg" alt="Carlo Lobrano">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" >Written by <span itemprop="author">Carlo Lobrano</span></h3>
	<p class="author-bio"></p>
</div><!-- ./author-content -->
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=What%20Goes%20Around,%20Comes%20Around&amp;url=/what-goes-around-comes-around/&amp;via=https://twitter.com/carlolobrano" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=/what-goes-around-comes-around/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=/what-goes-around-comes-around/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div><!-- /.share-this -->
					<div class="page-meta">
	<p>Updated <time datetime="2013-07-28T00:00:00Z" itemprop="datePublished">July 28, 2013</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					
				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
        
      
			<li><a href="" ></a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2015 <a href="">Quantum Leap</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="/js/main.js"></script>

  </body>

</html>
