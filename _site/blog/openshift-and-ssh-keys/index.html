<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Openshift and SSH Keys &#8211; Quantum Leap</title>

<meta name="keywords" content="openshift, ssh, security">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Openshift and SSH Keys">

<meta name="twitter:site" content="@carlolobrano">
<meta name="twitter:creator" content="@carlolobrano">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Openshift and SSH Keys">

<meta property="og:url" content="http://localhost:4000/blog/openshift-and-ssh-keys/">
<meta property="og:site_name" content="Quantum Leap">





<link rel="canonical" href="http://localhost:4000/blog/openshift-and-ssh-keys/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Quantum Leap Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="http://localhost:4000/about/" >About</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/blog/" >Blog</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/tags/" >Tags</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://localhost:4000/" class="site-logo" rel="home" title="Quantum Leap"><img src="http://localhost:4000/images/site-logo.png" width="200" height="200" alt="Quantum Leap logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">Quantum Leap</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Development, Smart Tools and Automation</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#openshift" title="Pages tagged openshift">openshift</a>&nbsp;&bull;&nbsp;<a href="http://localhost:4000/tags/#ssh" title="Pages tagged ssh">ssh</a>&nbsp;&bull;&nbsp;<a href="http://localhost:4000/tags/#security" title="Pages tagged security">security</a></span>
        
          <h1 class="entry-title">Openshift and SSH Keys</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        
          <img src="http://localhost:4000/images/bio-photo.jpg" class="bio-photo" alt="Carlo Lobrano bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Carlo Lobrano</span></span>
        <span class="entry-date date published"><time datetime="2014-06-08T00:00:00+02:00"><i class="fa fa-calendar-o"></i> June 08, 2014</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p>Since I moved back to Ubuntu-based machines I had some “problems” with Openshift application management (I am talking about command line).
As you can read <a href="/blog/post/1/">here</a>, I use Openshift to host this blog and if until I worked on a Fedora machine everything was fine, on Ubuntu-based machines has totally been another story.</p>

<p><strong>This is totally my fault</strong>, since I never had time/will to check what is wrong whity my usage of <code>rhc</code> client, but I just decided to change that.</p>

<p>The starting point is an application (this blog) already on the server and up and running. If the application has been created to the same machine you are working at the time you want modify something it’s fine, because <code>rhc</code> client created the SSH keys you need (that you <strong>really</strong> need). But what if you changed machine? Well, it turned out to be pretty simple (my bad to have waisted so much time)!</p>

<p><strong>We have two steps</strong></p>

<h2 id="on-client-side">On client side</h2>

<ol>
  <li>Generate a new pair of ssh keys<a rel="nofollow" href="#footnote1" id="ref_footnote1"><sup>1</sup></a>. I suggest to run the command directly <code>.ssh</code> folder.</li>
</ol>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ssh</span>-keygen -t rsa -C <span class="s2">&quot;your.email@yourprovider.com&quot;</span></code></pre></div>

<ol>
  <li>Add your new key to the ssh-agent</li>
</ol>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ssh</span>-add id_rsa  <span class="c"># id_rsa is the *default* key&#39;s name.</span></code></pre></div>

<ol>
  <li>[optional] Move your keys into a <code>.ssh</code> subfolder. If and only if you do so, you also need to create a <code>config</code> file to let the ssh client know which keys are for which host.</li>
</ol>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$mv</span> id_rsa* ~/.ssh/openshift
<span class="nv">$vim</span> config  <span class="c"># write something like the following</span>

<span class="m">1</span> Host &lt;application-name&gt;.rhcloud.com
<span class="m">2</span>     Hostname &lt;application-name&gt;.rhcloud.com
<span class="m">3</span>     PreferredAuthentications publickey
<span class="m">4</span>     IdentityFile ~/.ssh/openshift/id_rsa

<span class="nv">$sudo</span> service ssh restart  <span class="c"># Let the client know about the changes (I am not sure it is needed).</span></code></pre></div>

<h2 id="on-openshift-side">On Openshift side</h2>

<ol>
  <li>Go to your application setting page</li>
  <li>Click on <code>Add a new key...</code> button</li>
  <li>Copy your <code>~/.ssh/openshift/id_rsa.pub</code> into the given box</li>
  <li>Test connection: Check <code>Want to log in to your application?</code> link in your application page. Click on it and copy the ssh command, then execute it on your shell, adding the option <strong>-vvv</strong></li>
</ol>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>ssh -vvv ...</code></pre></div>

<p>The following line should appear</p>

<pre><code>debug1: Offering RSA public key: &lt;your-home&gt;/.ssh/openshift/id_rsa
</code></pre>

<p>and you’ll be logged into your application. Just type <code>exit</code> before do something wrong :)</p>

<p>And that’s it! I can now clone and modify and the rest.</p>

<h4 id="references">References</h4>

<ul>
  <li><a href="https://help.github.com/articles/generating-ssh-keys">GitHub Help</a></li>
</ul>

<h4 id="footnotes">Footnotes</h4>
<ol>
  <li>You are supposed to already have a pair of files named <em>id_rsa</em> on your <code>.ssh</code> folder. If your <code>id_rsa.pub</code> file is something like <code>ssh-rsa</code> followed by a bunch of characters, you can use that whithout generating a new pair.<a rel="nofollow" href="#ref_footnote1" id="footnote1">[↩]</a>.</li>
</ol>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/articles/switch-to-application-shortcut-on-linux/" class="btn" title="Switch-to-application Shortcut on Linux">Previous</a>
      
      
        <a href="http://localhost:4000/blog/working-remotely/" class="btn" title="Working Remotely">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2015 Carlo Lobrano. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/carlolobrano" title="Carlo Lobrano on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="https://linkedin.com/in/carlolobrano" title="Carlo Lobrano on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="http://stackoverflow.com/users/1197008/carlo" title="Carlo Lobrano on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	<a href="https://instagram.com/carlo.lobrano" title="Carlo Lobrano on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	
	<a href="https://github.com/clobrano" title="Carlo Lobrano on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>




</body>
</html>
